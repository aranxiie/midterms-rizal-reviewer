<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rizal: The Ultimate Reviewer</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap');

        :root {
            --primary-red: #B80000;
            --dark-red: #8C0000;
            --light-text: #F5F5F5;
            --dark-bg: #1A1A1A;
            --correct-green: #28a745;
            --incorrect-red-feedback: #dc3545;
            --neutral-gray: #333;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            color: var(--light-text);
            background-color: var(--dark-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            background-color: #2b2b2b;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5), inset 0 0 15px rgba(184, 0, 0, 0.2);
            border: 3px solid var(--dark-red);
            width: 100%;
            max-width: 800px;
            overflow: hidden;
            text-align: center;
            padding: 30px;
        }

        .start-screen h1, .score-screen h1 {
            font-family: 'Press Start 2P', cursive;
            color: var(--primary-red);
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 3px 3px 0px var(--dark-bg);
        }

        .start-screen h2 {
            font-family: 'Press Start 2P', cursive;
            color: var(--light-text);
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        #topic-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .topic-btn {
            font-family: 'Roboto', sans-serif;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--light-text);
            background-color: var(--neutral-gray);
            border: 2px solid var(--dark-red);
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .topic-btn:hover {
            background-color: var(--dark-red);
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.5);
        }

        #quiz-screen {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        #quiz-topic-title {
            font-family: 'Press Start 2P', cursive;
            color: var(--primary-red);
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .hud {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: var(--neutral-gray);
            border-radius: 10px;
            border: 2px solid var(--dark-red);
            overflow: hidden;
        }

        #progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--primary-red);
            transition: width 0.3s ease-in-out;
        }

        #question {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 20px 0;
            min-height: 100px;
        }

        #answer-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .btn {
            font-family: 'Roboto', sans-serif;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--light-text);
            background-color: var(--neutral-gray);
            border: 2px solid var(--dark-red);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }

        .btn:hover:not(:disabled) {
            background-color: var(--dark-red);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }
        
        .btn.correct {
            background-color: var(--correct-green);
            border-color: #1e7e34;
        }
        
        .btn.incorrect {
            background-color: var(--incorrect-red-feedback);
            border-color: #b21f2d;
        }
        
        .btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        #next-btn, #retry-btn, #back-btn {
            font-family: 'Press Start 2P', cursive;
            background-color: var(--primary-red);
            color: var(--light-text);
            border: none;
            padding: 15px 30px;
            font-size: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        #next-btn:hover, #retry-btn:hover, #back-btn:hover {
            background-color: var(--dark-red);
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <!-- Start Screen -->
        <div id="start-screen">
            <h1>RIZAL</h1>
            <h2>Choose Your Chapter</h2>
            <div id="topic-selection">
                <!-- Topic buttons will be generated by JS -->
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden">
            <h2 id="quiz-topic-title">Topic Title</h2>
            <div class="hud">
                <div id="progress-text">Question 1 / 10</div>
                <div id="score-text">Score: 0</div>
            </div>
            <div class="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
            <h3 id="question">Question text goes here</h3>
            <div id="answer-buttons">
                <!-- Answer buttons will be generated by JS -->
            </div>
            <div class="controls">
                <button id="next-btn" class="hidden">Next</button>
            </div>
        </div>

        <!-- Score Screen -->
        <div id="score-screen" class="hidden">
            <h1>Chapter Complete!</h1>
            <p id="final-score-text">Your final score is 0 out of 0.</p>
            <p id="final-feedback-text"></p>
            <div class="controls">
                <button id="retry-btn">Retry Chapter</button>
                <button id="back-btn">Main Menu</button>
            </div>
        </div>
    </div>

    <script>
        const nextButton = document.getElementById('next-btn');
        const retryButton = document.getElementById('retry-btn');
        const backButton = document.getElementById('back-btn');
        
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const scoreScreen = document.getElementById('score-screen');
        const topicSelectionContainer = document.getElementById('topic-selection');
        
        const quizTopicTitleElement = document.getElementById('quiz-topic-title');
        const questionElement = document.getElementById('question');
        const answerButtonsElement = document.getElementById('answer-buttons');
        const progressTextElement = document.getElementById('progress-text');
        const scoreTextElement = document.getElementById('score-text');
        const progressBarElement = document.getElementById('progress-bar');
        const finalScoreTextElement = document.getElementById('final-score-text');
        const finalFeedbackTextElement = document.getElementById('final-feedback-text');

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let currentTopic = '';
        
        const topics = {
            'Hong Kong & Macao': [
                { question: "When did Rizal first arrive in Hong Kong aboard the steamer Zafiro?", answers: [ { text: "February 8, 1888", correct: true }, { text: "March 8, 1888", correct: false }, { text: "January 8, 1888", correct: false }, { text: "February 18, 1889", correct: false } ] },
                { question: "Who was the Spanish spy that Rizal noted was shadowing him in Hong Kong?", answers: [ { text: "Jose Sainz de Varanda", correct: true }, { text: "Eulogio Despujol", correct: false }, { text: "Valeriano Weyler", correct: false }, { text: "Jose Taviel de Andrade", correct: false } ] },
                { question: "Which religious order did Rizal observe to be the richest in Hong Kong, owning over 700 houses?", answers: [ { text: "The Dominican Order", correct: true }, { text: "The Franciscan Order", correct: false }, { text: "The Jesuit Order", correct: false }, { text: "The Augustinian Order", correct: false } ] },
                { question: "How did Rizal describe the city of Macao?", answers: [ { text: "Small, low, and gloomy", correct: true }, { text: "Vibrant and bustling", correct: false }, { text: "Large and very clean", correct: false }, { text: "Modern and expensive", correct: false } ] },
                { question: "In whose home did Rizal and Jose Maria Basa stay for two days in Macao?", answers: [ { text: "Don Juan Francisco Lecaros", correct:true }, { text: "Balbino Mauricio", correct:false }, { text: "Manuel Yriarte", correct:false }, { text: "Jose Maria Basa", correct:false } ] },
                { question: "Where did Rizal establish his successful ophthalmic clinic in Hong Kong?", answers: [ { text: "No. 5 D'Aguilar Street", correct: true }, { text: "The Victoria Hotel", correct: false }, { text: "Primrose Hill", correct: false }, { text: "Rue Maubeuge", correct: false } ] },
            ],
            'Borneo Colonization': [
                { question: "What was the proposed name for the Filipino colony in North Borneo (Sabah)?", answers: [ { text: "New Calamba", correct: true }, { text: "New Philippines", correct: false }, { text: "Rizalstown", correct: false }, { text: "Fort Pilar", correct: false } ] },
                { question: "How many acres of land were the British authorities willing to give for the Filipino colony?", answers: [ { text: "100,000 acres", correct: true }, { text: "50,000 acres", correct: false }, { text: "1,000,000 acres", correct: false }, { text: "10,000 acres", correct: false } ] },
                { question: "For how long was the lease of the land in Borneo offered?", answers: [ { text: "999 years", correct: true }, { text: "99 years", correct: false }, { text: "500 years", correct: false }, { text: "Indefinitely", correct: false } ] },
                { question: "Which Governor-General did not approve the Borneo Colonization Project, stating the Philippines lacked laborers?", answers: [ { text: "Eulogio Despujol", correct: true }, { text: "Emilio Terrero", correct: false }, { text: "Valeriano Weyler", correct: false }, { text: "Camilo de Polavieja", correct: false } ] },
                { question: "Who was Rizal's brother-in-law who rejected the Borneo project, believing they should not leave their motherland?", answers: [ { text: "Manuel T. Hidalgo", correct: true }, { text: "Mariano Ponce", correct: false }, { text: "Marcelo H. del Pilar", correct: false }, { text: "Antonio Luna", correct: false } ] },
            ],
            'Japan': [
                { question: "Rizal arrived in Yokohama, Japan on February 28, 1888. Where did he register to stay?", answers: [ { text: "The Grand Hotel", correct: true }, { text: "The Tokyo Hotel", correct: false }, { text: "The Spanish Legation", correct: false }, { text: "The Imperial Hotel", correct: false } ] },
                { question: "Who invited Rizal to live at the Spanish Legation in Tokyo?", answers: [ { text: "Juan Perez Caballero", correct: true }, { text: "Jose Sainz de Varanda", correct: false }, { text: "Tetcho Suehiro", correct: false }, { text: "Emilio Terrero", correct: false } ] },
                { question: "What was the real name of the Japanese girl, O-Sei-San, with whom Rizal fell in love?", answers: [ { text: "Seiko Usui", correct: true }, { text: "Yuriko Takiguchi", correct: false }, { text: "Sakura Miyanoshita", correct: false }, { text: "Hana Meguro", correct: false } ] },
                { question: "Which of these was NOT an impression that Rizal had of Japan?", answers: [ { text: "The people were loud and impolite", correct: true }, { text: "The beauty of the country", correct: false }, { text: "The cleanliness and industry of the people", correct: false }, { text: "There were very few thieves", correct: false } ] },
                { question: "Who was the Japanese journalist and champion of human rights that Rizal befriended on the steamer Belgic?", answers: [ { text: "Tetcho Suehiro", correct: true }, { text: "Juan Perez Caballero", correct: false }, { text: "Alfred Charlton", correct: false }, { text: "Yoshiharu Takiguchi", correct: false } ] },
                { question: "How long was Rizal's sojourn in Japan?", answers: [ { text: "45 days (one month and a half)", correct: true }, { text: "Two weeks", correct: false }, { text: "Six months", correct: false }, { text: "One year", correct: false } ] },
            ],
            'America': [
                { question: "On what date did Rizal first see America, arriving in San Francisco?", answers: [ { text: "April 28, 1888", correct: true }, { text: "May 4, 1888", correct: false }, { text: "May 13, 1888", correct: false }, { text: "April 13, 1888", correct: false } ] },
                { question: "Why were the passengers of the steamer Belgic not allowed to land for a week upon arriving in San Francisco?", answers: [ { text: "A rumored cholera epidemic, used as a pretext for racial politics", correct: true }, { text: "The ship needed repairs", correct: false }, { text: "There was a customs strike", correct: false }, { text: "They arrived on a national holiday", correct: false } ] },
                { question: "What was the primary bad impression Rizal had of America?", answers: [ { text: "The lack of racial equality", correct: true }, { text: "The low standard of living", correct: false }, { text: "The lack of industrial progress", correct: false }, { text: "The unfriendly nature of the people", correct: false } ] },
                { question: "Which famous landmark did Rizal see as he was leaving New York for Liverpool?", answers: [ { text: "The Statue of Liberty", correct: true }, { text: "The Golden Gate Bridge", correct: false }, { text: "The Empire State Building", correct: false }, { text: "The White House", correct: false } ] },
                { question: "Rizal described America as the 'land par excellence of freedom but only for the ______'.", answers: [ { text: "whites", correct: true }, { text: "rich", correct: false }, { text: "educated", correct: false }, { text: "immigrants", correct: false } ] },
            ],
            'London': [
                { question: "Which was NOT one of Rizal's three main reasons for choosing to live in London?", answers: [ { text: "To find a wife and settle down", correct: true }, { text: "To improve his knowledge of the English language", correct: false }, { text: "To study and annotate Morga's Sucesos de Las Islas Filipinas", correct: false }, { text: "It was a safe place to continue his fight against Spanish tyranny", correct: false } ] },
                { question: "In whose house did Rizal find a modest boarding place at No. 37 Chalcot, Crescent, Primrose Hill?", answers: [ { text: "The Beckett family", correct: true }, { text: "Dr. Antonio Ma. Regidor", correct: false }, { text: "Dr. Reinhold Rost", correct: false }, { text: "The Ventura family", correct: false } ] },
                { question: "What was Rizal's greatest achievement while in London?", answers: [ { text: "Annotating Morga's Sucesos de las Islas Filipinas", correct: true }, { text: "Writing El Filibusterismo", correct: false }, { text: "Mastering the English language", correct: false }, { text: "His romance with Gertrude Beckett", correct: false } ] },
                { question: "In defense against Fray Rodriguez's attacks on Noli, Rizal wrote a pamphlet under the pseudonym 'Dimas Alang'. What was it called?", answers: [ { text: "La Vision del Fray Rodriguez", correct: true }, { text: "Letter to the Young Women of Malolos", correct: false }, { text: "The Philippines a Century Hence", correct: false }, { text: "The Indolence of the Filipino", correct: false } ] },
                { question: "Who was the 'buxom English girl' with whom Rizal had a romance in London?", answers: [ { text: "Gertrude Beckett", correct: true }, { text: "Nelly Boustead", correct: false }, { text: "Suzanne Jacoby", correct: false }, { text: "O-Sei-San", correct: false } ] },
                { question: "What book did Rizal receive as a Christmas gift from his landlady?", answers: [ { text: "The Life and Adventures of Valentine Vox, the Ventriloquist", correct: true }, { text: "Uncle Tom's Cabin", correct: false }, { text: "The Count of Monte Cristo", correct: false }, { text: "Sucesos de las Islas Filipinas", correct: false } ] },
            ],
            'Paris & Belgium': [
                { question: "In March 1889, Rizal formed a temporary social club in Paris for Filipinos to enjoy their stay during the Universal Exposition. What was it called?", answers: [ { text: "Kidlat Club", correct: true }, { text: "La Solidaridad", correct: false }, { text: "Indios Bravos", correct: false }, { text: "The Propaganda Movement", correct: false } ] },
                { question: "Rizal's proposal to Nelly Boustead in Biarritz failed for two reasons. One was her mother's disapproval. What was the other?", answers: [ { text: "He refused to give up his Catholic faith and convert to Protestantism", correct: true }, { text: "He was not wealthy enough", correct: false }, { text: "He was still in love with Leonor Rivera", correct: false }, { text: "He had to leave for the Philippines immediately", correct: false } ] },
                { question: "Where did Rizal finish the manuscript for El Filibusterismo on March 29, 1891?", answers: [ { text: "Biarritz", correct: true }, { text: "Paris", correct: false }, { text: "Ghent", correct: false }, { text: "Brussels", correct: false } ] },
                { question: "Why did Rizal move from Paris to Brussels in 1890?", answers: [ { text: "The high cost of living in Paris", correct: true }, { text: "To escape the Spanish authorities", correct: false }, { text: "To be closer to the Jacoby sisters", correct: false }, { text: "To find a cheaper printer for his novel", correct: false } ] },
                { question: "Who was the woman in Brussels who fell in love with Rizal and wrote him heartbreaking letters after he left?", answers: [ { text: "Suzanne Jacoby", correct: true }, { text: "Gertrude Beckett", correct: false }, { text: "Nelly Boustead", correct: false }, { text: "Consuelo Ortiga y Perez", correct: false } ] },
            ],
            'Noli Me Tángere': [
                { question: "What does the Latin title 'Noli Me Tángere' translate to in English?", answers: [ { text: "Touch Me Not", correct: true }, { text: "The Reign of Greed", correct: false }, { text: "For the Fatherland", correct: false }, { text: "The Social Cancer", correct: false } ] },
                { question: "What American novel inspired Rizal to write Noli Me Tángere to expose the abuses in his own country?", answers: [ { text: "Uncle Tom's Cabin", correct: true }, { text: "Moby Dick", correct: false }, { text: "The Adventures of Huckleberry Finn", correct: false }, { text: "The Scarlet Letter", correct: false } ] },
                { question: "Who was the friend that loaned Rizal the money to finally publish Noli Me Tángere in Berlin in 1887?", answers: [ { text: "Máximo Viola", correct: true }, { text: "Valentin Ventura", correct: false }, { text: "Ferdinand Blumentritt", correct: false }, { text: "Antonio Luna", correct: false } ] },
                { question: "In Noli Me Tángere, who is the idealistic protagonist who returns to the Philippines after studying for 7 years in Europe?", answers: [ { text: "Crisostomo Ibarra", correct: true }, { text: "Elias", correct: false }, { text: "Basilio", correct: false }, { text: "Pilosopo Tasyo", correct: false } ] },
                { question: "Which character in Noli Me Tángere symbolizes the rich Filipinos who oppress their fellow countrymen?", answers: [ { text: "Kapitan Tiago", correct: true }, { text: "Don Rafael Ibarra", correct: false }, { text: "Gobernador General", correct: false }, { text: "Tandang Selo", correct: false } ] },
                { question: "Who is the biological father of Maria Clara in Noli Me Tángere?", answers: [ { text: "Padre Damaso", correct: true }, { text: "Kapitan Tiago", correct: false }, { text: "Padre Salvi", correct: false }, { text: "Don Rafael Ibarra", correct: false } ] },
                { question: "The character of Elias, who represents the common Filipino, utters the famous line: 'I die without seeing the ______ brighten over my native land.'", answers: [ { text: "dawn", correct: true }, { text: "sun", correct: false }, { text: "stars", correct: false }, { text: "moon", correct: false } ] },
                { question: "Which character personified the suffering of the motherland, a loving mother who becomes deranged after losing her sons?", answers: [ { text: "Sisa", correct: true }, { text: "Doña Victorina", correct: false }, { text: "Doña Consolacion", correct: false }, { text: "Pia Alba", correct: false } ] },
                { question: "Pilosopo Tasyo, the learned scholar, is said to be a reflection of Rizal's older brother. What was his brother's name?", answers: [ { text: "Paciano", correct: true }, { text: "Mariano", correct: false }, { text: "Teodoro", correct: false }, { text: "Jose", correct: false } ] },
                { question: "Which character symbolizes the Filipinos who are ashamed of their own race and have a distorted view of their identity?", answers: [ { text: "Doña Victorina", correct: true }, { text: "Maria Clara", correct: false }, { text: "Salome", correct: false }, { text: "Sisa", correct: false } ] },
            ],
            'El Filibusterismo': [
                { question: "What is the English translation of the title 'El Filibusterismo'?", answers: [ { text: "The Reign of Greed", correct: true }, { text: "Touch Me Not", correct: false }, { text: "The Subversive", correct: false }, { text: "The Social Cancer", correct: false } ] },
                { question: "To whom did Rizal dedicate El Filibusterismo?", answers: [ { text: "To the three martyred priests (GOMBURZA)", correct: true }, { text: "To his parents", correct: false }, { text: "To the Filipino people", correct: false }, { text: "To his beloved Leonor Rivera", correct: false } ] },
                { question: "In El Filibusterismo, Crisostomo Ibarra returns under the disguise of a wealthy jeweler. What is his new name?", answers: [ { text: "Simoun", correct: true }, { text: "Isagani", correct: false }, { text: "Basilio", correct: false }, { text: "Kabesang Tales", correct: false } ] },
                { question: "Who provided the funds that allowed Rizal to finally publish El Filibusterismo in Ghent?", answers: [ { text: "Valentin Ventura", correct: true }, { text: "Máximo Viola", correct: false }, { text: "Jose Maria Basa", correct: false }, { text: "Ferdinand Blumentritt", correct: false } ] },
                { question: "What was Simoun's primary objective in the novel?", answers: [ { text: "To incite a violent revolution to destroy the corrupt system", correct: true }, { text: "To establish a Spanish-language academy for students", correct: false }, { text: "To find Maria Clara and escape with her", correct: false }, { text: "To gain more wealth and political power", correct: false } ] },
                { question: "What was the object that contained Simoun's bomb, intended to explode during a wedding feast?", answers: [ { text: "A decorative lamp", correct: true }, { text: "A wedding cake", correct: false }, { text: "A jewelry box", correct: false }, { text: "A bottle of wine", correct: false } ] },
                { question: "Who throws Simoun's bomb into the river, thus averting the revolution?", answers: [ { text: "Isagani", correct: true }, { text: "Basilio", correct: false }, { text: "Padre Florentino", correct: false }, { text: "Juanito Pelaez", correct: false } ] },
                { question: "Kabesang Tales, a farmer who loses his land to the friars, becomes a feared bandit with what name?", answers: [ { text: "Matanglawin", correct: true }, { text: "El Filibustero", correct: false }, { text: "Simoun", correct: false }, { text: "Quiroga", correct: false } ] },
                { question: "Who was Basilio's girlfriend who tragically commits suicide after a priest attempts to rape her?", answers: [ { text: "Juli", correct: true }, { text: "Paulita Gomez", correct: false }, { text: "Maria Clara", correct: false }, { text: "Doña Victorina", correct: false } ] },
                { question: "At the end of the novel, what does Padre Florentino do with Simoun's chest of jewels?", answers: [ { text: "He throws it into the sea", correct: true }, { text: "He gives it to the poor", correct: false }, { text: "He buries it", correct: false }, { text: "He turns it over to the authorities", correct: false } ] },
            ]
        };

        function displayTopics() {
            topicSelectionContainer.innerHTML = ''; // Clear previous buttons
            for (const topic in topics) {
                const button = document.createElement('button');
                button.innerText = topic;
                button.classList.add('topic-btn');
                button.dataset.topic = topic;
                button.addEventListener('click', () => startQuiz(topic));
                topicSelectionContainer.appendChild(button);
            }
        }
        
        function showStartScreen() {
            scoreScreen.classList.add('hidden');
            quizScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
            displayTopics();
        }

        function startQuiz(topic) {
            currentTopic = topic;
            score = 0;
            currentQuestions = topics[topic].sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;

            startScreen.classList.add('hidden');
            scoreScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');

            quizTopicTitleElement.innerText = topic;
            scoreTextElement.innerText = `Score: ${score}`;
            setNextQuestion();
        }

        function setNextQuestion() {
            resetState();
            if (currentQuestionIndex < currentQuestions.length) {
                showQuestion(currentQuestions[currentQuestionIndex]);
                updateProgress();
            } else {
                showScore();
            }
        }

        function updateProgress() {
            progressTextElement.innerText = `Question ${currentQuestionIndex + 1} / ${currentQuestions.length}`;
            progressBarElement.style.width = `${((currentQuestionIndex + 1) / currentQuestions.length) * 100}%`;
        }

        function showQuestion(question) {
            questionElement.innerText = question.question;
            question.answers.forEach(answer => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                button.classList.add('btn');
                if (answer.correct) {
                    button.dataset.correct = answer.correct;
                }
                button.addEventListener('click', selectAnswer);
                answerButtonsElement.appendChild(button);
            });
        }

        function resetState() {
            nextButton.classList.add('hidden');
            while (answerButtonsElement.firstChild) {
                answerButtonsElement.removeChild(answerButtonsElement.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedButton = e.target;
            const correct = selectedButton.dataset.correct === 'true';
            if (correct) {
                score++;
                scoreTextElement.innerText = `Score: ${score}`;
            }
            setStatusClass(selectedButton, correct);
            Array.from(answerButtonsElement.children).forEach(button => {
                setStatusClass(button, button.dataset.correct === 'true');
                button.disabled = true;
            });
            nextButton.classList.remove('hidden');
        }

        function setStatusClass(element, correct) {
            clearStatusClass(element);
            if (correct) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
        }

        function clearStatusClass(element) {
            element.classList.remove('correct');
            element.classList.remove('incorrect');
        }
        
        function showScore() {
            quizScreen.classList.add('hidden');
            scoreScreen.classList.remove('hidden');
            finalScoreTextElement.innerText = `Your score for ${currentTopic} is ${score} out of ${currentQuestions.length}.`;
            
            const percentage = (score / currentQuestions.length) * 100;
            let feedback = '';
            if (percentage >= 90) {
                feedback = "Astounding! You are a true Rizal scholar on this topic!";
            } else if (percentage >= 70) {
                feedback = "Excellent work! You've navigated this chapter with skill.";
            } else if (percentage >= 50) {
                feedback = "A solid effort! You show great promise. A little more review will perfect it.";
            } else {
                feedback = "A worthy attempt. Perhaps it's time to reread this chapter.";
            }
            finalFeedbackTextElement.innerText = feedback;
        }

        // Event Listeners
        nextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            setNextQuestion();
        });
        retryButton.addEventListener('click', () => startQuiz(currentTopic));
        backButton.addEventListener('click', showStartScreen);
        
        // Initial call to set up the main menu
        showStartScreen();
    </script>
</body>
</html>
